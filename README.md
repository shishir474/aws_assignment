# AWS_Assignment

## Task 1
### Create an IAM role with S3 full access.   
- Search IAM in AWS Console.
- Under the Access Management section click on the Roles section.
- Click on Create Role and select AWS Service and EC2.
- Create a policy which gives put_object permission to your bucket
- Add your role name and click on create role.

### Create an EC2 instance with the above role.         
- Search EC2 in AWS Console and click on Launch Instance.
- Give the name of your instance and select the below configuration.
- Under advance details select the IAM role created and launch the instance.

### Create a bucket from AWS CLI 
- Open your terminal and type aws configure.
- Type your access key ID and password and type your region name.
- Type the below command and mention your unique bucket name and your region.
CLI COMMAND: aws s3api create-bucket –bucket shishir-aws –region us-east-1



## Task 2
Import the necessary libraries/modules:

The json module is imported to handle JSON-related operations.
The boto3 module is imported to interact with AWS services, specifically the S3 service.
The datetime module is imported to generate the current timestamp.
Create an S3 client:

The boto3.client('s3') creates an S3 client that allows interaction with the S3 service.
Define the lambda_handler function:

The lambda_handler function is the entry point for the Lambda function. It takes in two parameters: event and context.
Set the S3 bucket name and current timestamp:

The variable bucket is assigned the name of the S3 bucket where the JSON object will be uploaded.
The variable ct is assigned the current timestamp using datetime.datetime.now().
Create a dictionary to store the data:

The variable dict is created as an empty dictionary to store the data.
Various key-value pairs are added to the dictionary, representing different attributes of the transaction.
Generate the file name:

The variable file_name is generated by concatenating the current timestamp with the string '.json'. This will serve as the name of the JSON file to be uploaded.
Convert the dictionary to a JSON byte stream:

The json.dumps() function is used to convert the dictionary into a JSON string.
The resulting JSON string is encoded into bytes using encode('UTF-8').
The bytes are stored in the uploadByteStream variable.
Upload the JSON object to S3:

The s3.put_object() method is called to upload the JSON object to the S3 bucket.
The Bucket parameter is set to the bucket variable, specifying the target S3 bucket.
The Key parameter is set to the file_name variable, providing the name of the file in the S3 bucket.
The Body parameter is set to the uploadByteStream variable, containing the JSON object in byte form.
Print a completion message:

The code outputs 'put complete!' to indicate that the file upload process has finished.




## Task 3
- Import the necessary libraries: json for JSON operations, boto3 for interacting with AWS services, and specifically imports datetime from the datetime module.
- Initialize the S3 client (s3_client) and CloudWatch client (cloud_watch) using boto3.client.
- The lambda_handler function is the entry point for the Lambda function.
- The function loads the JSON body from the event data using json.loads(event["body"]) and assigns it to the body variable.
- The current timestamp is generated using datetime.now(), converted to a string, and added to the body dictionary with the key "timestamp".
- The S3 bucket name is set as "shishir-aws" in the bucket_name variable.
- The file_name variable is created by appending the current timestamp with ".json" to generate a unique file name for each upload.
- The json.dumps function is used to serialize the event dictionary into a JSON-formatted string, which is then encoded as UTF-8 bytes using encode('UTF-8').
- The s3_client.put_object method is called to upload the JSON data (json_bytes) as the object body to the specified S3 bucket (bucket_name) with the specified file name (file_name).
- The function returns a response with a status code of 200 and the uploaded file name as the response body in JSON format.



